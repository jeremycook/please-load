var please={root:"/",cacheBuster:null,container:document.getElementsByTagName("head")[0],plugins:{"get-fragment":function(e,t){var n=new XMLHttpRequest;n.addEventListener("load",function(){var e=document.createElement("div");e.innerHTML=this.responseText,t(e)}),n.open("GET",please.getLibPath(e)),n.send()},"insert-fragment-children":function(libOptions,callback,fragment){if(!fragment)throw new Error("Empty 'fragment' argument.");for(var scriptNumber=1;0<fragment.childNodes.length;){var node=fragment.childNodes[0];if("SCRIPT"===node.nodeName.toUpperCase()){if(node.type&&"text/javascript"!==node.type.toLowerCase())throw console.error("node",node),new Error("Could not insert child of fragment 'node'. See console error for details.");var sourceURL=please.getLibPath(libOptions),scriptId=node.getAttribute("id")||"script-"+scriptNumber;eval(node.innerHTML+"\n//# sourceURL="+sourceURL+"#"+scriptId),console.debug("eval: "+window.location.protocol+"//"+window.location.host+sourceURL+"#"+scriptId),fragment.removeChild(node),scriptNumber++}else if("TEMPLATE"===node.nodeName.toUpperCase()){var supportsTemplate="content"in document.createElement("template");if(supportsTemplate)please.container.appendChild(node);else{var script=document.createElement("script");for(var i in script.type="text/html",node.attributes){var attr=node.attributes[i];script[attr.name]=attr.value}script.innerHTML=node.innerHTML,please.container.appendChild(script),fragment.removeChild(node)}}else please.container.appendChild(node)}fragment.remove?fragment.remove():delete fragment,callback()},"console-log":function(e,t,n){console.log(e,n),t(n)},"insert-script":function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.addEventListener("load",function(){t()}),n.src=please.getLibPath(e),please.container.appendChild(n)},"insert-link":function(e,t){var n=document.createElement("link");n.rel="stylesheet",n.async=!0,n.addEventListener("load",function(){t()}),n.href=please.getLibPath(e),please.container.appendChild(n)}},rules:[{test:"\\.css$",use:["insert-link"]},{test:"\\.js$",use:["insert-script"]},{test:"\\.html$",use:["insert-fragment-children","get-fragment"]}],libs:{},LibOptions:function(){throw new Error("Not initialized")},load:function(){throw new Error("Not initialized")},getAbsolutePath:function(){throw new Error("Not initialized")},getLibPath:function(){throw new Error("Not initialized")}};!function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},writable:!0,configurable:!0}),please.LibOptions=s,please.getAbsolutePath=l,please.getLibPath=function(e){return l(e.route?e.route.replace(/\[lib\]/gi,e.lib):e.file)},please.load=function(e,t){o.push({lib:e,callback:t})};var o=[];function a(e,t){var n=please.libs[e];if(n||(n=new s(e,{}),please.libs[e]=n,console.debug("Automatically created "+e)),n.loaded)t&&t();else if(n.deps&&0<n.deps.length){var r=0;for(var o in n.deps){a(n.deps[o],function(){++r>=n.deps.length&&i(n,t)})}}else i(n,t)}function i(n,r){if(n.loaded)r&&r();else{if(!n.onload){for(var e in console.debug("Loading "+n.lib),n.onload=[],please.rules){var o=please.rules[e];if(new RegExp(o.test,"i").test(n.file)){var a=o.use.length-1;function i(e){if(0<=--a)please.plugins[o.use[a]](n,i,e);else{for(var t in console.debug("Loaded "+n.lib),n.loaded=!0,r&&r(),n.onload)n.onload[t]();n.onload=null}}return void please.plugins[o.use[a]](n,i)}}throw new Error("Failed to find a rule for lib '"+n.lib+"'.")}console.debug("Awaiting "+n.lib),n.onload.push(function(){console.debug("Awaited "+n.lib),r&&r()})}}function s(e,t){this.lib=e,this.file=e,this.deps=[],this.loaded=!1,this.onload=null,Object.assign(this,t)}function l(e){return please.root+e+(please.cacheBuster?(0<=e.indexOf("?")?"&":"?v=")+please.cacheBuster:"")}!function(){var e=document.getElementsByTagName("script"),t=e[e.length-1],n=t.getAttribute("data-config")||"/please.json";please.root=n.substr(0,n.lastIndexOf("/")),"/"!==please.root.substr(please.root.length-1)&&(please.root+="/"),t.hasAttribute("data-cache-buster")&&(please.cacheBuster=t.getAttribute("data-cache-buster"));var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);if(e.libs){var t=Object.getOwnPropertyNames(e.libs);for(var n in t){var r=t[n];please.libs[r]=new s(r,e.libs[r])}}!function(){for(var e in please.load=a,o){var t=o[e];a(t.lib,t.callback)}}()}};n=l("please.json");r.open("GET",n,!0),r.send()}()}();
//# sourceMappingURL=please-load.min.js.map